rgName="ch05-rg"
storageName="cookbk01storage"

az storage account create --name $storageName --resource-group $rgName --sku Standard_LRS --kind StorageV2

storageKey=$(az storage account keys list --resource-group $rgName --account-name $storageName --query [0].value --output tsv)  

az storage container create --name uploadcontainer --account-name $storageName --account-key $storageKey

az storage queue create --name blobsqueue --account-name $storageName --account-key $storageKey

storageResId=$(az storage account show --name $storageName --resource-group $rgName --query id -o tsv)

storageQueueId="$storageResId/queueservices/default/queues/blobsqueue"

topicName="storagetopic01"

MSYS_NO_PATHCONV=1 az eventgrid system-topic create --resource-group $rgName --name $topicName --topic-type microsoft.storage.storageaccounts --source $storageResId --location canadacentral

subscriptionName="storagequeuesub01"

MSYS_NO_PATHCONV=1 az eventgrid system-topic event-subscription create --name $subscriptionName --resource-group $rgName --system-topic-name $topicName --endpoint-type storagequeue --endpoint $storageQueueId

blobName="ver.txt"
localPath="C:/Users/Reza/ver.txt"

az storage blob upload --account-key $storageKey --name $blobName --file $localPath --account-name $storageName --container-name uploadcontainer

az storage message get --queue-name blobsqueue --account-name $storageName --account-key $storageKey

Sample output:
[
  {
    "content": "eyJ0b3BpYyI6Ii9zdWJzY3JpcHRpb25zLzE5OTY5YzgxLWU4ZmYtNDU4NS04YzJmLTNmMTk2YjU4ODIyNy9yZXNvdXJjZUdyb3Vwcy9jaDA1LXJnL3Byb3ZpZGVycy9NaWNyb3NvZnQuU3RvcmFnZS9zdG9yYWdlQWNjb3VudHMvY29va2JrMDFzdG9yYWdlIiwic3ViamVjdCI6Ii9ibG9iU2VydmljZXMvZGVmYXVsdC9jb250YWluZXJzL3VwbG9hZGNvbnRhaW5lci9ibG9icy92ZXIudHh0IiwiZXZlbnRUeXBlIjoiTWljcm9zb2Z0LlN0b3JhZ2UuQmxvYkNyZWF0ZWQiLCJpZCI6IjM5MDkyMmEwLTkwMWUtMDA2MS0wMWQ4LWYyMWU4MjA2ZDRhNSIsImRhdGEiOnsiYXBpIjoiUHV0QmxvYiIsImNsaWVudFJlcXVlc3RJZCI6ImNkODQ3MGJhLTVlY2ItMTFlZC04OWNkLTM0N2RmNjEwMjBkZCIsInJlcXVlc3RJZCI6IjM5MDkyMmEwLTkwMWUtMDA2MS0wMWQ4LWYyMWU4MjAwMDAwMCIsImVUYWciOiIweDhEQUMwRUZCMjIyQzNFRiIsImNvbnRlbnRUeXBlIjoidGV4dC9wbGFpbiIsImNvbnRlbnRMZW5ndGgiOjE1MDgsImJsb2JUeXBlIjoiQmxvY2tCbG9iIiwidXJsIjoiaHR0cHM6Ly9jb29rYmswMXN0b3JhZ2UuYmxvYi5jb3JlLndpbmRvd3MubmV0L3VwbG9hZGNvbnRhaW5lci92ZXIudHh0Iiwic2VxdWVuY2VyIjoiMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxRDUwMDAwMDAwMDAwMTczMGM3Iiwic3RvcmFnZURpYWdub3N0aWNzIjp7ImJhdGNoSWQiOiJkZjMyNzQ0Yy0zMDA2LTAwNDctMDBkOC1mMjU2OWEwMDAwMDAifX0sImRhdGFWZXJzaW9uIjoiIiwibWV0YWRhdGFWZXJzaW9uIjoiMSIsImV2ZW50VGltZSI6IjIwMjItMTEtMDdUMTg6NDE6MzQuNDY4NjA2M1oifQ==",
    "dequeueCount": 2,
    "expirationTime": "2022-11-14T18:41:35+00:00",
    "id": "ba7b2d8b-2cea-4b29-baea-89dad71d948f",
    "insertionTime": "2022-11-07T18:41:35+00:00",
    "popReceipt": "AgAAAAMAAAAAAAAA98J+0tjy2AE=",
    "timeNextVisible": "2022-11-07T18:43:26+00:00"
  }
]

After Base64 decoding the content:

{"topic":"/subscriptions/19969c81-e8ff-4585-8c2f-3f196b588227/resourceGroups/ch05-rg/providers/Microsoft.Storage/storageAccounts/cookbk01storage","subject":"/blobServices/default/containers/uploadcontainer/blobs/ver.txt","eventType":"Microsoft.Storage.BlobCreated","id":"390922a0-901e-0061-01d8-f21e8206d4a5","data":{"api":"PutBlob","clientRequestId":"cd8470ba-5ecb-11ed-89cd-347df61020dd","requestId":"390922a0-901e-0061-01d8-f21e82000000","eTag":"0x8DAC0EFB222C3EF","contentType":"text/plain","contentLength":1508,"blobType":"BlockBlob","url":"https://cookbk01storage.blob.core.windows.net/uploadcontainer/ver.txt","sequencer":"000000000000000000000000000001D500000000001730c7","storageDiagnostics":{"batchId":"df32744c-3006-0047-00d8-f2569a000000"}},"dataVersion":"","metadataVersion":"1","eventTime":"2022-11-07T18:41:34.4686063Z"}




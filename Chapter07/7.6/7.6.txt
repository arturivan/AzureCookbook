rgName="ch07-rg"
vnetName="cookbook-vnet01"

az network vnet create --resource-group $rgName --name $vnetName --address-prefix 10.0.0.0/16 --subnet-name Subnet01 --subnet-prefix 10.0.0.0/26

functionAppName="communicationcookdemofunc"

az functionapp config access-restriction add --resource-group $rgName --name $functionAppName --rule-name allowMyIP --action Allow --ip-address <ip-address> --priority 100

az functionapp config access-restriction add --resource-group $rgName --name $functionAppName --rule-name app_gateway --action Allow --vnet-name $vnetName --subnet Subnet01 --priority 200
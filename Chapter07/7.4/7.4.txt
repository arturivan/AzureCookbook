rgName="ch07-rg"
cosmosDBAccountName="bindingdemocookcosmos"
functionAppName="cookbookch07FuncApp"

az cosmosdb create --name $cosmosDBAccountName --resource-group $rgName

az cosmosdb sql database create --account-name $cosmosDBAccountName --name MyDB --throughput 1000 --resource-group $rgName

MSYS_NO_PATHCONV=1 az cosmosdb sql container create --name UploadedBlobs --partition-key-path "/name" --throughput 400 --database-name MyDB --account-name $cosmosDBAccountName --resource-group $rgName

cosmosConnectionString=$(az cosmosdb keys list --name $cosmosDBAccountName --resource-group $rgName --type connection-strings --query connectionStrings[0].connectionString --output tsv)

az functionapp config appsettings set --name $functionAppName --resource-group $rgName --settings "CosmosConnection=$cosmosConnectionString"
